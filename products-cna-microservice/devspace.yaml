version: v2beta1
name: products

imports:
  - path: "../devspace-common.yaml"

vars:
  SERVICE_NAME:
    default: "products"
  K8S_MANIFEST_PATH_LOCAL:
    default: "${K8S_DIR}/infra/k8s/apps/overlays/local/products/"
  K8S_MANIFEST_PATH_AZURE:
    default: "${K8S_DIR}/infra/k8s/apps/overlays/azure/products/"

dev:
  products:
    labelSelector:
      app: products-deployment
    container: products
    devImage: ghcr.io/loft-sh/devspace-containers/javascript:18-alpine
    sync:
      - path: ./:/app
        excludePaths:
          - .dockerignore
          - .devspace/
          - node_modules/
          - build/
          - .git/
          - "*.log"
          - package-lock.json
          - yarn.lock
        initialSync: preferLocal
        printLogs: true
    terminal:
      command: ./devspace_start.sh
    ssh:
      enabled: true
    proxyCommands:
      - command: devspace
      - command: kubectl
      - command: helm
      - gitCredentials: true
    ports:
      - port: "5000"
    open:
      - url: http://localhost:5000/api-docs